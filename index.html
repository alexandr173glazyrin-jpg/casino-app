<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quatro Casino Case</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            background: #1a1a1a; 
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            text-align: center; 
            margin: 0;
            padding: 20px;
            overflow: hidden; 
        }
        h2 { color: #f39c12; margin-bottom: 30px; }
        
        .roulette-container { 
            position: relative; 
            width: 320px; 
            margin: 0 auto; 
            overflow: hidden; 
            border: 3px solid #f39c12; 
            border-radius: 15px; 
            height: 100px; 
            background: #222;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.2);
        }
        
        .line { 
            position: absolute; 
            left: 50%; 
            top: 0; 
            bottom: 0; 
            width: 3px; 
            background: #ff4757; 
            z-index: 10; 
            transform: translateX(-50%);
        }
        
        .tape { 
            display: flex; 
            position: absolute; 
            left: 0; 
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1); 
            will-change: transform;
        }
        
        .item { 
            min-width: 80px; 
            height: 100px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold; 
            border-right: 1px solid #333; 
            font-size: 20px;
            background: linear-gradient(180deg, #2c3e50, #000000);
        }

        .item:nth-child(even) { background: linear-gradient(180deg, #34495e, #000000); }

        button { 
            background: linear-gradient(135deg, #f39c12, #e67e22); 
            border: none; 
            padding: 15px 40px; 
            color: white; 
            border-radius: 30px; 
            font-size: 18px; 
            font-weight: bold;
            cursor: pointer; 
            margin-top: 40px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: 0.3s;
        }
        
        button:active { transform: scale(0.95); }

        .win-msg { 
            margin-top: 30px; 
            font-size: 24px; 
            color: #2ecc71; 
            display: none; 
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>
    <h2>üì¶ –û–¢–ö–†–´–¢–ò–ï –ö–ï–ô–°–ê</h2>
    
    <div class="roulette-container">
        <div class="line"></div>
        <div id="tape" class="tape"></div>
    </div>

    <button id="spinBtn">–ö–†–£–¢–ò–¢–¨ (50 ü™ô)</button>
    <div id="winMsg" class="win-msg"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤—Å—ë –æ–∫–Ω–æ

        const tape = document.getElementById('tape');
        const winMsg = document.getElementById('winMsg');
        const spinBtn = document.getElementById('spinBtn');

        // –°–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–∏–∑–æ–≤
        const prizes = [10, 20, 50, 100, 250, 10, 50, 10, 500, 20, 1000, 50, 20, 10, 100];
        const itemWidth = 80;

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ª–µ–Ω—Ç—É (50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–æ–ª–≥–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏)
        for(let i = 0; i < 60; i++) {
            const val = prizes[Math.floor(Math.random() * prizes.length)];
            const div = document.createElement('div');
            div.className = 'item';
            div.innerText = val + 'ü™ô';
            tape.appendChild(div);
        }

        spinBtn.addEventListener('click', () => {
            spinBtn.style.display = 'none'; // –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É –ª–µ–Ω—Ç—ã (–º–µ–∂–¥—É 45 –∏ 55)
            const winningIndex = 45 + Math.floor(Math.random() * 10);
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤—ã–∏–≥—Ä–∞–≤—à–∏–π –ø—Ä–µ–¥–º–µ—Ç –±—ã–ª —Ä–æ–≤–Ω–æ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ
            const containerWidth = 320;
            const offset = -(winningIndex * itemWidth) + (containerWidth / 2 - itemWidth / 2);
            
            tape.style.transform = `translateX(${offset}px)`;

            // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ (4 —Å–µ–∫—É–Ω–¥—ã + –∑–∞–ø–∞—Å)
            setTimeout(() => {
                const winValue = tape.children[winningIndex].innerText;
                winMsg.innerText = "–í–´ –í–´–ò–ì–†–ê–õ–ò: " + winValue;
                winMsg.style.display = 'block';
                
                // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
                setTimeout(() => {
                    const finalAmount = winValue.replace('ü™ô', '');
                    tg.sendData(finalAmount); // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞
                    tg.close(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º Mini App
                }, 2000);
            }, 4100);
        });
    </script>
</body>
</html>
